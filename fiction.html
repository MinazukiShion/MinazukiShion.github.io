<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>虚构｜水無月紫苑</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="site-header-top">
  <div class="site-title">
    <a href="index.html">水無月紫苑</a>
  </div>
</div>

<header>
  <nav class="main-nav">
    <a href="index.html" data-nav="home">首页</a>
    <div class="dropdown">
      <a class="dropbtn" data-nav="nonfiction">非虚构</a>
      <div class="dropdown-content">
        <a href="policy.html" data-nav="policy">政策</a>
        <a href="research.html" data-nav="research">研究</a>
      </div>
    </div>
    <a href="fiction.html" data-nav="fiction">虚构</a>
  </nav>
  <div class="lang-switcher">
    <div class="lang-switcher-inner">
      <button class="lang-current">
        <span class="lang-text">中文</span>
        <span class="arrow">▼</span>
      </button>
      <div class="lang-dropdown">
        <button class="lang-option" data-lang-code="zh" onclick="setLang('zh')">中文 <span class="check">✓</span></button>
        <button class="lang-option" data-lang-code="ja" onclick="setLang('ja')">日本語 <span class="check">✓</span></button>
        <button class="lang-option" data-lang-code="en" onclick="setLang('en')">English <span class="check">✓</span></button>
      </div>
    </div>
  </div>
</header>

<main>

  <section>
    <p data-lang="zh">这里是我的原创世界与角色创作。它们并非逃避现实，而是另一种真实的记录方式。</p>
    <p data-lang="ja">ここには私のオリジナル世界観とキャラクター創作があります。それは現実からの逃避ではなく、もう一つの現実です。</p>
    <p data-lang="en">This is where my original worlds and characters live. They are not an escape from reality, but another form of it.</p>
  </section>

  <section>
    <h2>
      <span data-lang="zh">作品列表</span>
      <span data-lang="ja">作品一覧</span>
      <span data-lang="en">Works</span>
    </h2>
    <div class="post-list" id="fiction-list"></div>
  </section>

</main>

<footer>© 水無月紫苑</footer>

<script src="fiction-content.js"></script>
<script>
function renderContent(lang) {
  const container = document.getElementById('fiction-list');
  if (!container) return;
  const tags = window.FICTION_TAG_LABELS || {};
  const articles = window.FICTION_ARTICLES || [];

  container.innerHTML = articles.map(a => {
    const tag   = tags[a.tag]?.[lang] ?? a.tag;
    const title = (a[lang] || a.zh).title;
    return `<article class="post-item">
      <div class="post-meta">
        <span class="post-date">${a.date}</span>
        <span class="post-tag">${tag}</span>
      </div>
      <a class="post-title" href="article.html?id=${a.id}&type=fiction">${title}</a>
    </article>`;
  }).join('');
}
</script>
<script src="lang.js"></script>
</body>
</html>
